# --- CONFIGURATION GÉNÉRALE ---
server.port=${PORT:8080}
spring.sql.init.encoding=UTF-8

# --- CONFIGURATION POSTGRESQL (RENDER) ---
# Se recomienda usar variables de entorno para seguridad
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# 'update' mantiene los datos existentes; 'always' ejecuta el script data.sql al iniciar
spring.jpa.hibernate.ddl-auto=update
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true

# --- CONFIGURATION MAILGUN (SMTP) ---
spring.mail.host=smtp.mailgun.org
spring.mail.port=587
spring.mail.username=pharmaciemailbox@sandbox09fe026c51b2484d9179348850ed33fd.mailgun.org
# La contraseña se inyecta desde Render para evitar bloqueos de GitHub
spring.mail.password=${MAILGUN_SMTP_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Remitente autorizado en tu Sandbox de Mailgun
app.mail.from=postmaster@sandbox09fe026c51b2484d9179348850ed33fd.mailgun.org

# --- API REST Y SWAGGER ---
spring.data.rest.base-path=api
spring.jackson.serialization.indent-output=true
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true

# --- LOGS ---
logging.level.org.springframework.mail=DEBUG
logging.pattern.console=%clr(%-5p) %cyan(%logger{15}) - %msg %n